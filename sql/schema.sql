CREATE TABLE `games` (`id` integer PRIMARY KEY AUTOINCREMENT,`discord_channel_id` text,`discord_message_id` text,`era` text,`host_user_id` text,`host_user_name` text,`start_time` datetime,`end_time` datetime,`cancelled` numeric,`countdown_start_time` datetime,`xp_multiplier` real,`reward_coins` integer,`discord_end_message_id` text,`winner_user_id` text,`winner_user_name` text,CONSTRAINT `fk_games_winner_user` FOREIGN KEY (`winner_user_id`) REFERENCES `users`(`id`),CONSTRAINT `fk_games_host_user` FOREIGN KEY (`host_user_id`) REFERENCES `users`(`id`));
CREATE TABLE `interaction_item_mappings` (`interaction_id` integer,`item_name` text,PRIMARY KEY (`interaction_id`,`item_name`),CONSTRAINT `fk_interaction_item_mappings_interaction` FOREIGN KEY (`interaction_id`) REFERENCES `interactions`(`id`),CONSTRAINT `fk_interaction_item_mappings_item` FOREIGN KEY (`item_name`) REFERENCES `items`(`name`));
CREATE TABLE `interaction_messages` (`id` integer PRIMARY KEY AUTOINCREMENT,`text` text,`event` text);
CREATE TABLE `interaction_user_mention_mappings` (`interaction_id` integer,`interaction_user_mention_id` integer,PRIMARY KEY (`interaction_id`,`interaction_user_mention_id`),CONSTRAINT `fk_interaction_user_mention_mappings_interaction` FOREIGN KEY (`interaction_id`) REFERENCES `interactions`(`id`),CONSTRAINT `fk_interaction_user_mention_mappings_interaction_user_mention` FOREIGN KEY (`interaction_user_mention_id`) REFERENCES `interaction_user_mentions`(`id`));
CREATE TABLE `interaction_user_mentions` (`id` integer PRIMARY KEY AUTOINCREMENT,`user_id` text,`user_name` text,`killed` numeric,`suffix` text,CONSTRAINT `fk_interaction_user_mentions_user` FOREIGN KEY (`user_id`) REFERENCES `users`(`id`));
CREATE TABLE `interactions` (`id` integer PRIMARY KEY AUTOINCREMENT,`round_id` integer,`message_id` integer,CONSTRAINT `fk_interactions_round` FOREIGN KEY (`round_id`) REFERENCES `rounds`(`id`),CONSTRAINT `fk_interactions_message` FOREIGN KEY (`message_id`) REFERENCES `interaction_messages`(`id`));
CREATE TABLE `items` (`name` text,PRIMARY KEY (`name`));
CREATE TABLE `rounds` (`id` integer PRIMARY KEY AUTOINCREMENT,`game_id` integer,`round_number` integer,`post_time` datetime,`discord_message_id` text,CONSTRAINT `fk_rounds_game` FOREIGN KEY (`game_id`) REFERENCES `games`(`id`));
CREATE TABLE `user_name_observations` (`id` integer PRIMARY KEY AUTOINCREMENT,`user_id` text,`time` datetime,`name` text,CONSTRAINT `fk_user_name_observations_user` FOREIGN KEY (`user_id`) REFERENCES `users`(`id`));
CREATE TABLE `users` (`id` text,PRIMARY KEY (`id`));
CREATE UNIQUE INDEX `interaction_message_text_idx` ON `interaction_messages`(`text`);
CREATE UNIQUE INDEX `game_round_idx` ON `rounds`(`game_id`,`round_number`);
